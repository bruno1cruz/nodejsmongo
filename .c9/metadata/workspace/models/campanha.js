{"changed":true,"filter":false,"title":"campanha.js","tooltip":"/models/campanha.js","value":"module.exports = function(app) {\n\n  var db = require('../lib/db_connect')();\n  var Schema = require('mongoose').Schema;\n  \n  var item = new Schema({\n      nome     : String,\n      descricao : String\n  },{_id: false});\n\n  var campanha = Schema({\n      nome: { type: String, required: true },\n      ciclo : {\n          url : {type : String}\n      },\n      ranking :  [{ type: Schema.Types.ObjectId, ref: 'usuario' }],\n      contador: {type:Number, \"default\":0},\n      vouchers: {type:Number, \"default\":1},\n      inicio: { type: Date },\n      url: {type:String, unique:true},\n      itens : [item]\n  });\n  \n  \n  campanha.index({ 'ciclo.url': 1, url: 1 }, { unique: true });\n\n  return db.model('campanhas', campanha);\n};","undoManager":{"mark":-1,"position":0,"stack":[[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":12,"column":15},"end":{"row":12,"column":16}},"text":" "}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":12,"column":15},"end":{"row":12,"column":15},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":3,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1408592797064}